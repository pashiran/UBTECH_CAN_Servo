# 🧩 서보 액션 테이블 데이터 구조 (Action Table Format)

> 원본: 60바이트 헤더 및 포즈 데이터 구조 문서  
> 본 문서는 다중 서보 제어 시 사용되는 액션 데이터 구조를 설명합니다.

---

## 📦 Header (60 bytes)

| Offset | 값 | 설명 |
|---------|----|------|
| 00 | 0xA9 | 시작 코드 |
| 01 | 0x9A | 시작 코드 (두 번째 바이트) |
| 02 | 0x38 | 헤더 데이터 길이 = 56 |
| 03 | 0x61 | 명령 코드 예약 영역 |
| 04 | {id} | 액션 ID |
| 05 | 0x00 | 예약 |
| 06~25 | {name} | 액션 이름 (최대 20자, 남은 공간은 0으로 채움) |
| 26 | 0x00 | 문자열 종료 문자 |
| 27 | {len} | 액션 이름 길이 |
| 28 | {step} | 스텝(동작 단계) 수 |
| 29 | 0x00 | 예약 |
| 30~33 | {time} | 총 실행 시간 (ms, 32bit) |
| 34~35 | {servo} | 대상 서보 수 |
| 36~37 | 0x00 | 예약 |
| 38~57 | 0x00 | 예약 |
| 58 | {sum} | 체크섬 |
| 59 | 0xED | 종료 코드 |

---

## 🤖 Pose Data (60 bytes, 최대 32개 서보 확장)

| Offset | 값 | 설명 |
|---------|----|------|
| 00 | 0xA9 | 시작 코드 |
| 01 | 0x9A | 시작 코드 (두 번째 바이트) |
| 02 | 0x38 | 헤더 데이터 길이 = 56 |
| 03 | 0x62 | 명령 코드 예약 |
| 04 | {actionId} | 액션 ID |
| 05 | {seq} | 포즈 순서 번호 |
| 06 | {enabled} | 활성화 플래그 |
| 07~08 | {s.time} | 서보 실행 시간 (ms) |
| 09~10 | {w.time} | 대기 시간 (ms) |
| 11~42 | {angle} | 서보 각도 데이터 (32개 서보) |
| 43~50 | {led} | LED 제어 플래그 (8바이트) |
| 51 | {head} | 헤드 라이트 플래그 (0xff = 동작 없음) |
| 52 | {mp3.d} | MP3 디렉터리 (0xff = 동작 없음) |
| 53 | {mp3.f} | MP3 파일 번호 (0x00=정지, 0xff=동작 없음) |
| 54 | {mp3.vol} | MP3 볼륨 (0xff=변경 없음) |
| 55~57 | 0x00 | 예약 |
| 58 | {sum} | 체크섬 |
| 59 | 0xED | 종료 코드 |

---

## 🧠 참고

- **총 길이:** 각 블록 60바이트 고정  
- **데이터 정렬:** 16진수 기준, 각 필드는 고정 오프셋  
- **포즈 수:** 최대 32개의 서보를 동시에 제어 가능  
- **체크섬:** 모든 데이터 합의 하위 바이트  
- **시작 코드/종료 코드:** 패킷 식별을 위한 고정값 (0xA9, 0xED)
